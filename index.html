<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/style/style.css" />
  <title>Work Day Scheduler</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
</head>

<body>
  <header class="jumbotron">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="currentDay" class="lead"></p>
  </header>
  <div class="container">


  </div>
  <script>
    // GIVEN I am using a daily planner to create a schedule
    // WHEN I open the planner
    // THEN the current day is displayed at the top of the calendar

    // declaring variable to store a function to retrieve today's date
    var currentTime = new Date();
    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

    // waiting until html page loads to run jQuery script
    $(document).ready(function () {
      // displaying current time in the currentDay paragraph 
      $("#currentDay").text(days[(new Date()).getDay()] + ", " + months[(new Date()).getMonth()] + " " + new Date().getDate());


      var timeblocks = [
        {
          hour: "9am",
          tasks: "",
        },
        {
          hour: "10am",
          tasks: "",
        },
        {
          hour: "11am",
          tasks: "",
        },
        {
          hour: "12pm",
          tasks: "",
        },
        {
          hour: "1pm",
          tasks: "",
        },
        {
          hour: "2pm",
          tasks: "",
        },
        {
          hour: "3pm",
          tasks: "",
        },
        {
          hour: "4pm",
          tasks: "",
        },
        {
          hour: "5pm",
          tasks: ""
        }
      ];
      // timeblocksIndex = 0;
      var container = $(".container");
      var saveBtn = $(".saveBtn");

      // Anthony's HW setup is in last 15 min of Tuesday's jQuery class

      // (new Date()).getHours()

      // WHEN I scroll down
      // THEN I am presented with time blocks for standard business hours
      // 9am-5pm (Time blocks created above)

      // WHEN I view the time blocks for that day
      // THEN each time block is color-coded to indicate whether it is in the past, present, or future

      // array of all hours shown on calendar in 24-hr time
      var workHours = [9, 10, 11, 12, 13, 14, 15, 16, 17];
      // defining the current hour
      var currentHour = currentTime.getHours();

      // (new Date()).getHours() ... but jQuery version, to check current hour

      function renderTimeblocks() {
        container.empty();

        for (var i = 0; i < timeblocks.length; i++) {
          // making a div for each set of time block elements 
          var wrap = $("<div>");
          // giving the div a class of wrap and row
          wrap.addClass("wrap");
          wrap.addClass("row");
          // appending the wrap divs to the larger container div
          container.append(wrap);

          // creating a span for each hour with classes hour, row, and col-1.5
          var s = $("<span>");
          s.addClass("hour");
          s.addClass("row");
          s.addClass("col-1.5");
          // giving span elements the text of the workday hours
          s.text(timeblocks[i].hour);
          // appending to the wrap div
          wrap.prepend(s);

          // creating divs for each timeblock
          var block = $("<div>");

          // adding classes for time-block, row, and col-9 (column 3/4 the width of the screen)
          block.addClass("time-block");
          block.addClass("row");
          block.addClass("col-9");
          // appending time block to corresponding wrap div
          wrap.append(block);

          // current hour will have the class "present", colored red
          if (currentHour === (i + 9)) {
            block.addClass("present");
            // wrap.append(block);
          }
          // hours in the past will have the class "past", colored gray
          if (currentHour > (i + 9)) {
            block.addClass("past");

            // wrap.append(block);
          }
          // hours in the future will have the class "future", colored green
          if (currentHour < (i + 9)) {
            block.addClass("future");
            // wrap.append(block);
          }
          // creating text area for each div, to type tasks into
          var textArea = $("<textarea>");
          textArea.addClass("row")
          textArea.addClass("col-12");
          // attaching textareas to their parent div elements
          block.append(textArea);

          // adding buttons for each time block
          var b = $("<button>");
          // assigning the classes saveBtn, row, and col-1 (1/12 width of window)
          b.addClass("saveBtn");
          b.addClass("row");
          b.addClass("col-1");
          // assigning each save button a data-index to connect it with corresponding work hour
          b.attr("data-index", timeblocks[i].hour);
          wrap.append(b);
          
          // creating an image tag and assigning it to a variable named saveImg
          var saveImg = $("<img>");
          // assigning save icon to the img tag, adding alt text of "Save Icon"
          saveImg.attr("src", "assets/images/save-white.png");
          saveImg.attr("alt", "Save Icon");
          // appending save image to each button 
          b.append(saveImg);
        }
      }
      // calling render function
      renderTimeblocks();


      // hours passed should be gray
      // current hour should be red
      //     if(i === 12){
      //       chosenTag.css(["background-color", "red"]);
      //       chosenTag.addClass("red-class");
      //     }
      //     if((new Date()).getHours() === i){ // uses military time 0-23 for hours
      //       chosenTag.addClass("red-class");
      //     }
      // future hours should be green

      // WHEN I click into a time block
      // THEN I can enter an event
      // create text areas for each time-block (DONE)

      // WHEN I click the save button for that time block
      // THEN the text for that event is saved in local storage

      // need an .on("click") event for save buttons (or one click event with (this))
      $(".saveBtn").on("click", function () {
        // logging the button I clicked on
        console.log(this);
        // making a variable 
        var clickSave = $(this).attr("data-index");
        // next, add to local storage (look at array of objects timeblocks i made above, see if I can use that)
        // var userInput = ... not done yet
      })

      // WHEN I refresh the page
      // THEN the saved events persist
      // (local storage works properly)


    });


      // in textarea associated with $(this)...using 
      // want to us (this) keyword to identify which save button you're clicking
      // that way, you don't need a new click event for each button
  </script>

</body>

</html>